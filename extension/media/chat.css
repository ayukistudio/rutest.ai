/* media/chat.css */
:root {
    --bg: var(--vscode-editor-background);
    --fg: var(--vscode-foreground);
    --muted: #9ca3af;
    --input-bg: var(--vscode-input-background);
    --input-fg: var(--vscode-input-foreground);
    --border: var(--vscode-editorWidget-border);
    --btn: var(--vscode-button-background);
    --btn-hover: var(--vscode-button-hoverBackground);
    --accent: #0a84ff; /* немного более яркий акцент */
    --success: #4caf50;
    --error: #f44336;
    --warning: #ff9800;
    --bubble-assistant: rgba(255,255,255,0.03);
    --bubble-user: var(--vscode-button-background);
    --bubble-user-fg: var(--vscode-button-foreground);
    --icon-color: #6b7280;
    --glass: rgba(255,255,255,0.02);
    --shadow: 0 6px 18px rgba(0,0,0,0.18);
}

/* Reset */
* { box-sizing: border-box; margin:0; padding:0; }
html,body { height:100%; }
body { background:var(--bg); color:var(--fg); font-family:var(--vscode-font-family); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

.chat-container { display:flex; flex-direction:column; height:100vh; min-height:400px; }

/* Header */
.chat-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 16px;
    border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
    backdrop-filter: blur(4px);
}
.header-title { display:flex; align-items:center; gap:10px; font-weight:600; font-size:13px; }
.header-title .icon { width:20px; height:20px; stroke:var(--accent); fill:none; stroke-width:1.5; }
.header-title span { color:var(--fg); }

/* header button */
.header-btn { background:none; border:none; cursor:pointer; padding:6px; border-radius:6px; display:flex; align-items:center; justify-content:center; }
.header-btn:hover { background:var(--glass); transform:translateY(-1px); }

/* Messages area */
.chat-messages { flex:1; overflow-y:auto; padding:18px; display:flex; flex-direction:column; gap:12px; background:transparent; scroll-behavior:smooth; }
.message { display:flex; gap:10px; max-width:85%; align-items:flex-start; animation:fadeIn .18s ease; }
.message.assistant { align-self:flex-start; }
.message.user { align-self:flex-end; flex-direction:row-reverse; }

.avatar { width:36px; height:36px; background:var(--bubble-assistant); border-radius:50%; display:flex; align-items:center; justify-content:center; flex-shrink:0; box-shadow: var(--shadow); }
.avatar .icon { width:18px; height:18px; fill:none; stroke:var(--icon-color); stroke-width:1.4; }

/* Bubbles */
.bubble {
    padding:10px 14px;
    border-radius:14px;
    background:var(--bubble-assistant);
    position:relative;
    box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    max-width:72ch;
    word-wrap:break-word;
    color:var(--fg);
    font-size:13px;
    line-height:1.4;
    transition:transform .12s ease;
}
.message.user .bubble {
    background:var(--bubble-user);
    color:var(--bubble-user-fg);
}
.bubble p { margin:0; line-height:1.45; }
.bubble code { background:rgba(0,0,0,.06); padding:2px 6px; border-radius:4px; font-family:var(--vscode-editor-font-family); font-size:12px; }

/* agent activity */
.agent-activity { padding:8px 16px; font-size:13px; color:var(--accent); display:flex; align-items:center; gap:8px; animation:pulse 1.6s infinite; min-height:36px; }
.agent-activity .icon { width:16px; height:16px; fill:none; stroke:var(--accent); stroke-width:1.8; animation:spin 1.2s linear infinite; }

/* attachments preview */
.attachments-preview { display:flex; flex-wrap:wrap; gap:8px; padding:8px 16px; border-top:1px solid var(--border); }
.attachment-chip {
    display:flex; align-items:center; gap:8px;
    background:var(--input-bg); color:var(--input-fg);
    padding:6px 10px; border-radius:14px; font-size:12px; box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}
.attachment-chip .icon { width:16px; height:16px; stroke:var(--icon-color); }
.attachment-chip button { background:none; border:none; cursor:pointer; font-size:14px; line-height:1; padding:2px; border-radius:6px; }
.attachment-chip button:hover { background:var(--glass); }

/* Input area */
.chat-input { border-top:1px solid var(--border); padding:12px 16px; display:flex; flex-direction:column; gap:10px; background:linear-gradient(180deg, transparent, rgba(0,0,0,0.02)); }
.toolbar { display:flex; gap:8px; align-items:center; }
.tool-btn { background:none; border:none; cursor:pointer; padding:6px; border-radius:8px; display:flex; align-items:center; justify-content:center; }
.tool-btn:hover { background:var(--glass); transform:translateY(-1px); }
.tool-btn .icon { width:20px; height:20px; fill:none; stroke:var(--icon-color); stroke-width:1.4; }

/* input + send */
.input-wrapper { display:flex; gap:10px; align-items:flex-end; }
#msgInput {
    flex:1; resize:none; background:var(--input-bg); color:var(--input-fg);
    border:1px solid var(--border); border-radius:999px; padding:10px 16px;
    font-family:inherit; min-height:44px; max-height:140px; line-height:1.4; font-size:13px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}
#msgInput::placeholder { color:var(--muted); opacity:0.9; }
#msgInput:focus { outline:none; border-color:var(--accent); box-shadow: 0 6px 18px rgba(10,132,255,0.06); }

.send-btn {
    background:var(--accent);
    color:#fff;
    border:none; cursor:pointer;
    padding:8px; border-radius:50%;
    width:44px; height:44px; display:flex; align-items:center; justify-content:center;
    box-shadow: 0 6px 18px rgba(10,132,255,0.14);
    transition:transform .12s ease, box-shadow .12s ease, opacity .12s ease;
}
.send-btn:hover { transform:translateY(-2px); box-shadow: 0 14px 30px rgba(10,132,255,0.14); }
.send-btn:active { transform:translateY(0); }
.send-btn:disabled { opacity:0.5; cursor:not-allowed; box-shadow:none; transform:none; }
.send-btn .icon { width:18px; height:18px; fill:none; stroke:#fff; stroke-width:1.6; }

/* test case UI */
.test-case { background:var(--bg); border:1px solid var(--border); border-radius:10px; padding:12px; margin-top:12px; }
.test-case-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.test-case-header h4 { margin:0; font-size:14px; }
.priority { padding:4px 10px; border-radius:999px; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:0.6px; }
.priority-high { background:var(--error); color:#fff; }
.priority-medium { background:var(--warning); color:#fff; }
.priority-low { background:var(--success); color:#fff; }
.step { margin:8px 0; padding-left:18px; position:relative; }
.step::before { content:""; position:absolute; left:0; top:6px; width:8px; height:8px; background:var(--accent); border-radius:50%; }
.code-block { margin-top:12px; border:1px solid var(--border); border-radius:8px; overflow:hidden; }
.code-header { display:flex; justify-content:space-between; align-items:center; background:var(--input-bg); padding:8px 12px; font-size:12px; }
.copy-btn { background:none; border:none; cursor:pointer; }
.copy-btn .icon { width:16px; height:16px; fill:none; stroke:var(--icon-color); }

/* actions */
.action-buttons { display:flex; flex-direction:column; gap:8px; margin-top:12px; }
.action-buttons button { flex:1; background:var(--btn); color:var(--bubble-user-fg); border:none; padding:10px 12px; border-radius:8px; cursor:pointer; font-size:13px; display:flex; align-items:center; justify-content:center; gap:8px; }
.action-buttons button:hover { background:var(--btn-hover); }

/* animations */
@keyframes fadeIn { from{opacity:0; transform:translateY(6px);} to{opacity:1; transform:none;} }
@keyframes pulse { 0%,100%{opacity:.7;} 50%{opacity:1;} }
@keyframes spin { from{transform:rotate(0deg);} to{transform:rotate(360deg);} }

/* responsive */
@media (max-width:720px) {
    .chat-header { padding:10px; }
    .chat-input { padding:10px; }
    .attachments-preview { padding:6px 10px; }
}
